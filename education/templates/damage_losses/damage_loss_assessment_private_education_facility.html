{% extends "dashboard/base.html" %}
{% block content %}
<script>
   $(document).ready(function(){
   $(document).on("click", "#add_preschool", function () {
     var title = $(this).data('id');
	 $(".modal-title").text(title);
});
 $(document).on("click", "#edit_preschool", function () {
     var title = $(this).data('id');
	 $(".modal-title").text(title);
});

$(document).on("click", "#add_primary", function () {
     var title = $(this).data('id');
	 $(".modal-title").text(title);
});
 $(document).on("click", "#edit_primary", function () {
     var title = $(this).data('id');
	 $(".modal-title").text(title);
});

$(document).on("click", "#add_secondary", function () {
     var title = $(this).data('id');
	 $(".modal-title").text(title);
});
 $(document).on("click", "#edit_secondary", function () {
     var title = $(this).data('id');
	 $(".modal-title").text(title);
});

$(document).on("click", "#add_university", function () {
     var title = $(this).data('id');
	 $(".modal-title").text(title);
});
 $(document).on("click", "#edit_university", function () {
     var title = $(this).data('id');
	 $(".modal-title").text(title);
});

$(document).on("click", "#add_technical", function () {
     var title = $(this).data('id');
	 $(".modal-title").text(title);
});
 $(document).on("click", "#edit_technical", function () {
     var title = $(this).data('id');
	 $(".modal-title").text(title);
});


});

</script>

<script>
  $(document).ready(function() {

   var nicesx = $("#boxscroll1").niceScroll({touchbehavior:false,cursorcolor:"#4679B2",cursoropacitymax:0.6,cursorwidth:8});
  
   
    
  });
  

</script>
<!-- Main content -->
<main class="main" ng-app="dlPvtEduFacilitiesApp" ng-controller="DlPvtEduFacilitiesController">

    <!-- Breadcrumb -->
    <ol class="breadcrumb">

        <li class="breadcrumb-item"><a href="#">Admin</a>
        </li>
        <li class="breadcrumb-item"><a href="#">Education Sector</a>
        </li>

        <li class="breadcrumb-item active"><span class="label label-success" style="font-size:14px;">Table 4. Damage and Loss Assessment of a Private Education Facility</span>
        </li>


    </ol>


    <div class="container-fluid">

        <ul class='nav nav-wizard'>
            <li id="li1" class="active"><a href='#step1' data-toggle="tab">1 - Damages</a></li>
            <li id="li2"><a href='#step2' data-toggle="tab">2 - Type of Schools and Assets</a></li>
            <li id="li3"><a href='#step3' data-toggle="tab">3 - Breakdown by Type of Educational Facility</a></li>

        </ul>

        <div id="myTabContent" class="tab-content" ng-form name="form_pvt_edu_facility_dl">
            <div class="tab-pane active" id="step1">

                <table class="table table-bordered">
                    <colgroup>
                        <col width="280"/>
                        <col width="136" span="6"/>
                    </colgroup>
                    <tbody>
                    <tr style="background:#fff;border:1px solid #fff;text-align:center;">
                        <td colspan="1" style="background:#fff;border:1px solid #fff;text-align:center;">
                        </td>
                        <td colspan="2" style="background:#fff;border:1px solid #fff;text-align:center;">
                            <span class="arrow_box" ng-show="submitted && form_pvt_edu_facility_dl.incident.$error.required">
                                Please Select Incident
                            </span>
                        </td>
                        <td colspan="2" style="background:#fff;border:1px solid #fff;text-align:center;">
                        </td>
                        <td colspan="2" style="background:#fff;border:1px solid #fff;text-align:center;">
                            <span class="arrow_box" ng-show="submitted && form_pvt_edu_facility_dl.district.$error.required">
                                Please Select District
                            </span>
                        </td>
                    </tr>
                    <tr class="trhead">
                        <td style="padding-left:5px;">Incident </td>

                        <td colspan="2" style="background:#EFEFEF;">
                            <select id="selectbasic" name="incident" ng-model="incident"
                                class="form-control" ng-change="changedValue(true)"
                                style="width:100%;font-weight:400;" required>

                                <option value="" selected="true">Select an Incident</option>
                                {% for incident in incidents %}

                                <option value={{incident.id}}>{{incident.disaster_type.name}}
                                    {{incident.reported_date_time}}
                                </option>
                                {% endfor %}
                            </select>

                             <!--select ng-change="fetchSchools()" ng-model="district" name="district" class="form-control"
                                        style="font-weight:400;" required>
                                    <option value="">-- Select --</option>
                                    {% for district in districts %}
                                    <option value="{{ district.id }}">{{ district.name }}</option>
                                    {% endfor %}
                                </select-->
                        </td>
                        <td colspan="2" style="padding-right:5px;text-align:right;">
                           Name of District
                        </td>
                        <td colspan="3" style="background:#EFEFEF;">
                            <select ng-change="fetchSchools()" ng-options="district as district.district__name for district in districts track by district.district__id"
                                name="district" id="ccyear" style="font-weight:400;" ng-model="district" ng-change="changedValue(false)"
                                class="form-control" required>
                                <option value="" selected>Select District</option>
                            </select>
                        </td>
                    </tr>
                    <tr class="trheadc" height="21">
                        <td rowspan="2" width="280" height="42">
                            Types of Educational Facilities
                        </td>
                        <td colspan="2" rowspan="2" width="272">
                            Number of Affected Educational Facilities
                        </td>
                        <td colspan="4" width="544">
                            Number of Affected Students
                        </td>
                    </tr>
                    <tr class="trsubc" height="21">
                        <td colspan="2" width="272" height="21">
                            Male
                        </td>
                        <td colspan="2" width="272">
                            Female
                        </td>
                    </tr>
                    <tr ng-repeat="dpefNaf in dlPvtEduFacilities.education.Table_4.DpefNaf" ng-if="dpefNaf.edu_facilities != 'TOTAL'" sheight="21">
                        <td ng-bind="dpefNaf.edu_facilities" ng-if="$index < 5" class="tdpa" width="280" height="21">
                        </td>
                        <td width="98" ng-if="$index > 4">
                            {% verbatim %}
                            <button id="delete" ng-click="removeItem('DpefNaf', $index)"
                                class="btn btn-sm btn-danger btn-circle">
                                <i class="fa fa-minus"></i>
                            </button>
                            <input style="width:80%;float:right;" name="dlPvtEduFacilities_{{$index}}"
                                ng-model="dpefNaf.edu_facilities"
                                popover="This field is required"
                                popover-toggle="form_pop_lat_census['dlPvtEduFacilities_' + $index].$dirty && !form_pop_lat_census['dlPvtEduFacilities_' + $index].$valid"
                                popover-placement="top" required type="text" class="form-control input-md">
                            {% endverbatim %}
                        </td>
                        <td colspan="2" width="272">
                            <input ng-model="dpefNaf.num_edu_facilities" id="textinput" name="textinput" type="number" placeholder=""
                                   class="form-control input-md">
                        </td>
                        <td colspan="2" width="272">
                            <input ng-model="dpefNaf.male" id="textinput" name="textinput" type="number" placeholder=""
                                   class="form-control input-md">
                        </td>
                        <td colspan="2" width="272">
                            <input ng-model="dpefNaf.female" id="textinput" name="textinput" type="number" placeholder=""
                                   class="form-control input-md">
                        </td>
                    </tr>
                    <tr class="tdpa" height="21">
                        <td class="tdpa" width="280" height="21">
                            Others 
                            <button ng-click="insertAsset('DpefNaf')"
                                    class="btn btn-sm btn-info btn-circle" id="insert">
                                <span class="fa fa-plus"></span>
                            </button>
                        </td>
                        <td colspan="2" width="272">

                        </td>
                        <td colspan="2" width="272">

                        </td>
                        <td colspan="2" width="272">

                        </td>
                    </tr>
                    <tr height="21">
                        <td class="tdpa" width="280" ng-bind="dlPvtEduFacilities.education.Table_4.DpefNaf[5].edu_facilities" height="21">
                        </td>
                        <td colspan="2" width="272" ng-bind="dlPvtEduFacilities.education.Table_4.DpefNaf[5].num_edu_facilities" ng-value="dlPvtEduFacilities.education.Table_4.DpefNaf[5].num_edu_facilities = dlPvtEduFacilities.education.Table_4.DpefNaf[0].num_edu_facilities + dlPvtEduFacilities.education.Table_4.DpefNaf[1].num_edu_facilities  + dlPvtEduFacilities.education.Table_4.DpefNaf[2].num_edu_facilities + dlPvtEduFacilities.education.Table_4.DpefNaf[3].num_edu_facilities + dlPvtEduFacilities.education.Table_4.DpefNaf[4].num_edu_facilities">
                        </td>
                        <td colspan="2" width="272" ng-bind="dlPvtEduFacilities.education.Table_4.DpefNaf[5].male" ng-value="dlPvtEduFacilities.education.Table_4.DpefNaf[5].male = dlPvtEduFacilities.education.Table_4.DpefNaf[0].male + dlPvtEduFacilities.education.Table_4.DpefNaf[1].male  + dlPvtEduFacilities.education.Table_4.DpefNaf[2].male + dlPvtEduFacilities.education.Table_4.DpefNaf[3].male + dlPvtEduFacilities.education.Table_4.DpefNaf[4].male">
                        </td>
                        <td colspan="2" width="272" ng-bind="dlPvtEduFacilities.education.Table_4.DpefNaf[5].female" ng-value="dlPvtEduFacilities.education.Table_4.DpefNaf[5].female = dlPvtEduFacilities.education.Table_4.DpefNaf[0].female + dlPvtEduFacilities.education.Table_4.DpefNaf[1].female  + dlPvtEduFacilities.education.Table_4.DpefNaf[2].female + dlPvtEduFacilities.education.Table_4.DpefNaf[3].female + dlPvtEduFacilities.education.Table_4.DpefNaf[4].female">
                        </td>
                    </tr>
                    </tbody>
                </table>


                <br>
                <a href="#step2" id="s1" class="btn btn-sm btn-info pull-right" data-toggle="tab"><span
                        class="glyphicon glyphicon-arrow-right"></span> Fill Type of Schools and Assets Informations</a>
                <br>
            </div>
            <div class="tab-pane fade" id="step2">

                <table class="table table-bordered">
                    <colgroup>
                        <col width="280"/>
                        <col width="136" span="6"/>
                    </colgroup>
                    <tbody>


                    <tr class="trheadc" height="28">
                        <td rowspan="2" width="280" height="49">
                            Type of Schools and Assets
                        </td>
                        <td rowspan="2" width="136">
                            Estimated Replacement Cost (LKR)
                        </td>
                        <td rowspan="2" width="136">
                            Estimated Repair Cost (LKR)
                        </td>
                        <td rowspan="2" width="136">
                            Total Damages (LKR)
                        </td>
                        <td colspan="2" width="272">
                            Estimated Losses (LKR)
                        </td>
                        <td rowspan="2" width="136">
                            Total Losses (LKR)
                        </td>
                    </tr>
                    <tr class="trsubc" height="21">
                        <td width="136" height="21">
                            Year 1
                        </td>
                        <td width="136">
                            Year 2
                        </td>
                    </tr>
                    </tbody>
                </table>
                <div id="boxscroll1" style="height:400px;overflow:auto;cursor:auto;">
                    <table class="table table-bordered">
                        <tbody>
                        <tr class="trheadc" height="21">
                            <td width="280" height="21">
                                Pre-school
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                        </tr>
                        <tr class="trsub" height="21">
                            <td class="trhead" width="280" height="21">
                                Pre-school Name
                            </td>
                            <td class="trsub" colspan="2" width="136">
                                <select ng-options="school as school.name for school in schools.PreSchools track by school.id"
                                    name="district" id="ccyear" ng-model="new_school['PreSchools']" class="form-control" required>
                                <option value="" selected>Select pre-school name</option>
                            </select>
                            </td>

                            <td width="136">
                                <a id="add_preschool" href="#modal-container-218029" ng-click="schoolType='PreSchools'" role="button" data-toggle="modal"
                                   data-id="Add Pre-school"
                                   class="open-modal-container-218029 btn btn-sm btn-block btn-primary btn-info">Add</a>
                            </td>
                            <td width="136">
                                <a id="edit_preschool" ng-click="is_edit_model=true; schoolType='PreSchools'" href="#modal-container-218029" role="button" data-toggle="modal"
                                   data-id="Edit Pre-school"
                                   class="btn btn-sm btn-block btn-primary btn-warning">Edit</a>
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                        </tr>
                        <tr ng-repeat="dpefBefPreSchool in dlPvtEduFacilities.education.Table_4.DpefBefPreSchool" height="21" ng-if="$index < 3">
                            <td ng-model="dpefBefPreSchool.asset" ng-bind="dpefBefPreSchool.asset" class="tdpa" width="280" height="21">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefPreSchool.est_rep_cost" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefPreSchool.est_repair_cost" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td width="136" ng-bind="dpefBefPreSchool.tot_damages" ng-value="dpefBefPreSchool.tot_damages = dpefBefPreSchool.est_rep_cost + dpefBefPreSchool.est_repair_cost">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefPreSchool.est_los_year_1" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefPreSchool.est_los_year_2" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td width="136" ng-bind="dpefBefPreSchool.tot_los" ng-value="dpefBefPreSchool.tot_los = dpefBefPreSchool.est_los_year_1 + dpefBefPreSchool.est_los_year_2">
                            </td>
                        </tr>
                        <tr height="21">
                            <td ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[3].asset" class="tdpa" width="280" height="21">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[3].est_rep_cost" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[3].est_rep_cost=dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[0].est_rep_cost + dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[1].est_rep_cost + dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[2].est_rep_cost">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[3].est_repair_cost" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[3].est_repair_cost=dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[0].est_repair_cost + dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[1].est_repair_cost + dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[2].est_repair_cost">
                            </td>
                            <td ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[3].tot_damages" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[3].tot_damages=dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[0].tot_damages + dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[1].tot_damages + dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[2].tot_damages" width="136">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[3].est_los_year_1" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[3].est_los_year_1=dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[0].est_los_year_1 + dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[1].est_los_year_1 + dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[2].est_los_year_1">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[3].est_los_year_2" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[3].est_los_year_2=dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[0].est_los_year_2 + dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[1].est_los_year_2 + dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[2].est_los_year_2">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[3].tot_los" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[3].tot_los=dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[0].tot_los + dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[1].tot_los + dlPvtEduFacilities.education.Table_4.DpefBefPreSchool[2].tot_los">
                            </td>
                        </tr>

                        <tr class="tdpa" height="21">
                            <td colspan="6" width="280" height="21">

                            </td>

                            <td width="136">
                                <button type="button" class="btn btn-block btn-success" ng-click="dlDataSubmit()">save</button>
                            </td>
                        </tr>
                        <tr class="trheadc" height="21">
                            <td width="280" height="21">
                                Primary School
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                        </tr>
                        <tr class="trsub" height="21">
                            <td class="trhead" width="280" height="21">
                                Primary School Name
                            </td>
                            <td class="trsub" colspan="2" width="136">
                                <select ng-options="school as school.name for school in schools.PrimarySchools track by school.id"
                                    name="district" id="ccyear" ng-model="new_school['PrimarySchools']" class="form-control" required>
                                <option value="" selected>Select primary school name</option>
                            </select>
                            </td>

                            <td width="136">
                                <a id="add_primary" href="#modal-container-218029" ng-click="schoolType='PrimarySchools'" role="button" data-toggle="modal"
                                   data-id="Add Primary School"
                                   class="open-modal-container-218029 btn btn-sm btn-block btn-primary btn-info">Add</a>
                            </td>
                            <td width="136">
                                <a id="edit_primary" href="#modal-container-218029" ng-click="is_edit_model=true; schoolType='PrimarySchools'" role="button" data-toggle="modal"
                                   data-id="Edit Primary School" class="btn btn-sm btn-block btn-primary btn-warning">Edit</a>
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                        </tr>
                        <tr ng-repeat="dpefBefPrmSchool in dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool" ng-if="$index < 3" height="21">
                            <td ng-bind="dpefBefPrmSchool.asset" class="tdpa" width="280" height="21">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefPrmSchool.est_rep_cost" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefPrmSchool.est_repair_cost" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td ng-bind="dpefBefPrmSchool.tot_damages" ng-value="dpefBefPrmSchool.tot_damages = dpefBefPrmSchool.est_rep_cost + dpefBefPrmSchool.est_repair_cost" width="136">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefPrmSchool.est_los_year_1" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefPrmSchool.est_los_year_2" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td ng-bind="dpefBefPrmSchool.tot_los" ng-value="dpefBefPrmSchool.tot_los = dpefBefPrmSchool.est_los_year_1 + dpefBefPrmSchool.est_los_year_2" width="136">
                            </td>
                        </tr>
                        <tr height="21">
                            <td ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[3].asset" class="tdpa" width="280" height="21">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[3].est_rep_cost" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[3].est_rep_cost=dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[0].est_rep_cost + dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[1].est_rep_cost + dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[2].est_rep_cost">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[3].est_repair_cost" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[3].est_repair_cost=dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[0].est_repair_cost + dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[1].est_repair_cost + dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[2].est_repair_cost">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[3].tot_damages" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[3].tot_damages=dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[0].tot_damages + dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[1].tot_damages + dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[2].tot_damages">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[3].est_los_year_1" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[3].est_los_year_1=dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[0].est_los_year_1 + dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[1].est_los_year_1 + dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[2].est_los_year_1">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[3].est_los_year_2" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[3].est_los_year_2=dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[0].est_los_year_2 + dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[1].est_los_year_2 + dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[2].est_los_year_2">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[3].tot_los" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[3].tot_los=dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[0].tot_los + dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[1].tot_los + dlPvtEduFacilities.education.Table_4.DpefBefPrmSchool[2].tot_los">
                            </td>
                        </tr>

                        <tr class="tdpa" height="21">
                            <td colspan="6" width="280" height="21">

                            </td>

                            <td width="136">
                                <button type="button" class="btn btn-block btn-success">save</button>
                            </td>
                        </tr>
                        <tr class="trheadc" height="21">
                            <td width="280" height="21">
                                Secondary School
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                        </tr>
                        <tr class="trsub" height="21">
                            <td class="trhead" width="280" height="21">
                                Secondary School Name
                            </td>
                            <td class="trsub" colspan="2" width="136">
                                <select ng-options="school as school.name for school in schools.SecondarySchools track by school.id"
                                    name="district" id="ccyear" ng-model="new_school['SecondarySchools']" class="form-control" required>
                                <option value="" selected>Select Secondary School Name</option>
                            </select>
                            </td>

                            <td width="136">
                                <a id="add_secondary" href="#modal-container-218029" ng-click="schoolType='SecondarySchools'" role="button" data-toggle="modal"
                                   data-id="Add Secondary  School"
                                   class="open-modal-container-218029 btn btn-sm btn-block btn-primary btn-info">Add</a>
                            </td>
                            <td width="136">
                                <a id="edit_secondary" ng-click="is_edit_model=true; schoolType='SecondarySchools'" href="#modal-container-218029" role="button" data-toggle="modal"
                                   data-id="Edit Secondary School" class="btn btn-sm btn-block btn-primary btn-warning">Edit</a>
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                        </tr>
                        <tr ng-repeat="dpefBefSecSchool in dlPvtEduFacilities.education.Table_4.DpefBefSecSchool" ng-if="$index < 3" height="21">
                            <td ng-model="dpefBefSecSchool.asset" ng-bind="dpefBefSecSchool.asset" class="tdpa" width="280" height="21">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefSecSchool.est_rep_cost" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefSecSchool.est_repair_cost" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td ng-bind="dpefBefSecSchool.tot_damages" ng-value="dpefBefSecSchool.tot_damages = dpefBefSecSchool.est_rep_cost + dpefBefSecSchool.est_repair_cost" width="136">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefSecSchool.est_los_year_1" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefSecSchool.est_los_year_2" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td ng-bind="dpefBefSecSchool.tot_los" ng-value="dpefBefSecSchool.tot_los = dpefBefSecSchool.est_los_year_1 + dpefBefSecSchool.est_los_year_2" width="136">
                            </td>
                        </tr>
                        <tr height="21">
                            <td ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[3].asset" class="tdpa" width="280" height="21">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[3].est_rep_cost" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[3].est_rep_cost=dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[0].est_rep_cost + dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[1].est_rep_cost + dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[2].est_rep_cost">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[3].est_repair_cost" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[3].est_repair_cost=dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[0].est_repair_cost + dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[1].est_repair_cost + dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[2].est_repair_cost">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[3].tot_damages" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[3].tot_damages=dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[0].tot_damages + dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[1].tot_damages + dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[2].tot_damages">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[3].est_los_year_1" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[3].est_los_year_1=dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[0].est_los_year_1 + dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[1].est_los_year_1 + dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[2].est_los_year_1">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[3].est_los_year_2" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[3].est_los_year_2=dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[0].est_los_year_2 + dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[1].est_los_year_2 + dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[2].est_los_year_2">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[3].tot_los" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[3].tot_los=dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[0].tot_los + dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[1].tot_los + dlPvtEduFacilities.education.Table_4.DpefBefSecSchool[2].tot_los">
                            </td>
                        </tr>
                        <tr class="tdpa" height="21">
                            <td colspan="6" width="280" height="21">

                            </td>

                            <td width="136">
                                <button type="button" class="btn btn-block btn-success">save</button>
                            </td>
                        </tr>
                        <tr class="trheadc" height="21">
                            <td width="280" height="21">
                                University
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                        </tr>
                        <tr class="trsub" height="21">
                            <td class="trhead" width="280" height="21">
                                University Name
                            </td>
                            <td class="trsub" colspan="2" width="136">
                                <select ng-options="school as school.name for school in schools.Universities track by school.id"
                                    name="district" id="ccyear" ng-model="new_school['Universities']" class="form-control" required>
                                <option value="" selected>Select University Name</option>
                            </select>
                            </td>

                            <td width="136">
                                <a id="add_university" href="#modal-container-218029" ng-click="schoolType='Universities'" role="button" data-toggle="modal"
                                   data-id="Add University"
                                   class="open-modal-container-218029 btn btn-sm btn-block btn-primary btn-info">Add</a>
                            </td>
                            <td width="136">
                                <a id="edit_university" ng-click="is_edit_model=true; schoolType='Universities'" href="#modal-container-218029" role="button" data-toggle="modal"
                                   data-id="Edit University"
                                   class="btn btn-sm btn-block btn-primary btn-warning">Edit</a>
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                        </tr>
                        <tr ng-repeat="dpefBefUnv in dlPvtEduFacilities.education.Table_4.DpefBefUnv" ng-if="$index < 3" height="21">
                            <td ng-model="dpefBefUnv.asset" ng-bind="dpefBefUnv.asset" class="tdpa" width="280" height="21">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefUnv.est_rep_cost" type="number" placeholder=""
                                   class="form-control input-md">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefUnv.est_repair_cost" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td ng-bind="dpefBefUnv.tot_damages" ng-value="dpefBefUnv.tot_damages = dpefBefUnv.est_rep_cost + dpefBefUnv.est_repair_cost" width="136">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefUnv.est_los_year_1" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefUnv.est_los_year_2" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td ng-bind="dpefBefUnv.tot_los" ng-value="dpefBefUnv.tot_los = dpefBefUnv.est_los_year_1 + dpefBefUnv.est_los_year_2" width="136">
                            </td>
                        </tr>
                        <tr height="21">
                            <td ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefUnv[3].asset" class="tdpa" width="280" height="21">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefUnv[3].est_rep_cost" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefUnv[3].est_rep_cost=dlPvtEduFacilities.education.Table_4.DpefBefUnv[0].est_rep_cost + dlPvtEduFacilities.education.Table_4.DpefBefUnv[1].est_rep_cost + dlPvtEduFacilities.education.Table_4.DpefBefUnv[2].est_rep_cost">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefUnv[3].est_repair_cost" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefUnv[3].est_repair_cost=dlPvtEduFacilities.education.Table_4.DpefBefUnv[0].est_repair_cost + dlPvtEduFacilities.education.Table_4.DpefBefUnv[1].est_repair_cost + dlPvtEduFacilities.education.Table_4.DpefBefUnv[2].est_repair_cost">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefUnv[3].tot_damages" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefUnv[3].tot_damages=dlPvtEduFacilities.education.Table_4.DpefBefUnv[0].tot_damages + dlPvtEduFacilities.education.Table_4.DpefBefUnv[1].tot_damages + dlPvtEduFacilities.education.Table_4.DpefBefUnv[2].tot_damages">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefUnv[3].est_los_year_1" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefUnv[3].est_los_year_1=dlPvtEduFacilities.education.Table_4.DpefBefUnv[0].est_los_year_1 + dlPvtEduFacilities.education.Table_4.DpefBefUnv[1].est_los_year_1 + dlPvtEduFacilities.education.Table_4.DpefBefUnv[2].est_los_year_1">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefUnv[3].est_los_year_2" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefUnv[3].est_los_year_2=dlPvtEduFacilities.education.Table_4.DpefBefUnv[0].est_los_year_2 + dlPvtEduFacilities.education.Table_4.DpefBefUnv[1].est_los_year_2 + dlPvtEduFacilities.education.Table_4.DpefBefUnv[2].est_los_year_2">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefUnv[3].tot_los" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefUnv[3].tot_los=dlPvtEduFacilities.education.Table_4.DpefBefUnv[0].tot_los + dlPvtEduFacilities.education.Table_4.DpefBefUnv[1].tot_los + dlPvtEduFacilities.education.Table_4.DpefBefUnv[2].tot_los">
                            </td>
                        </tr>

                        <tr class="tdpa" height="21">
                            <td colspan="6" width="280" height="21">

                            </td>

                            <td width="136">
                                <button type="button" class="btn btn-block btn-success">save</button>
                            </td>
                        </tr>
                        <tr class="trheadc" height="21">
                            <td width="280" height="21">
                                Technical Institutes
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                        </tr>
                        <tr class="trsub" height="21">
                            <td class="trhead" width="280" height="21">
                                Technical Institute Name
                            </td>
                            <td class="trsub" colspan="2" width="136">
                                <select ng-options="school as school.name for school in schools.TechInstitutes track by school.id"
                                    name="district" id="ccyear" ng-model="new_school['TechInstitutes']" class="form-control" required>
                                <option value="" selected>Select Technical Institute Name</option>
                            </select>
                            </td>
                            <td width="136">
                                <a id="add_technical" href="#modal-container-218029" ng-click="schoolType='TechInstitutes'" role="button" data-toggle="modal"
                                   data-id="Add Technical Institutes"
                                   class="open-modal-container-218029 btn btn-sm btn-block btn-primary btn-info">Add</a>
                            </td>
                            <td width="136">
                                <a id="edit_technical" ng-click="is_edit_model=true; schoolType='TechInstitutes'" href="#modal-container-218029" role="button" data-toggle="modal"
                                   data-id="Edit Technical Institutes"
                                   class="btn btn-sm btn-block btn-primary btn-warning">Edit</a>
                            </td>
                            <td width="136">
                            </td>
                            <td width="136">
                            </td>
                        </tr>
                        <tr ng-repeat="dpefBefTechInst in dlPvtEduFacilities.education.Table_4.DpefBefTechInst" ng-if="$index < 3" height="21">
                            <td ng-model="dpefBefTechInst.asset" ng-bind="dpefBefTechInst.asset" class="tdpa" width="280" height="21">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefTechInst.est_rep_cost" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefTechInst.est_repair_cost" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td ng-bind="dpefBefTechInst.tot_damages" ng-value="dpefBefTechInst.tot_damages = dpefBefTechInst.est_rep_cost + dpefBefTechInst.est_repair_cost" width="136">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefTechInst.est_los_year_1" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td width="136">
                                <input ng-model="dpefBefTechInst.est_los_year_2" type="number" placeholder=""
                                       class="form-control input-md">
                            </td>
                            <td ng-bind="dpefBefTechInst.tot_los" ng-value="dpefBefTechInst.tot_los = dpefBefTechInst.est_los_year_1 + dpefBefTechInst.est_los_year_2" width="136">
                            </td>
                        </tr>
                        <tr height="21">
                            <td ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefTechInst[3].asset" class="tdpa" width="280" height="21">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefTechInst[3].est_rep_cost" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefTechInst[3].est_rep_cost=dlPvtEduFacilities.education.Table_4.DpefBefTechInst[0].est_rep_cost + dlPvtEduFacilities.education.Table_4.DpefBefTechInst[1].est_rep_cost + dlPvtEduFacilities.education.Table_4.DpefBefTechInst[2].est_rep_cost">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefTechInst[3].est_repair_cost" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefTechInst[3].est_repair_cost=dlPvtEduFacilities.education.Table_4.DpefBefTechInst[0].est_repair_cost + dlPvtEduFacilities.education.Table_4.DpefBefTechInst[1].est_repair_cost + dlPvtEduFacilities.education.Table_4.DpefBefTechInst[2].est_repair_cost">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefTechInst[3].tot_damages" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefTechInst[3].tot_damages=dlPvtEduFacilities.education.Table_4.DpefBefTechInst[0].tot_damages + dlPvtEduFacilities.education.Table_4.DpefBefTechInst[1].tot_damages + dlPvtEduFacilities.education.Table_4.DpefBefTechInst[2].tot_damages">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefTechInst[3].est_los_year_1" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefTechInst[3].est_los_year_1=dlPvtEduFacilities.education.Table_4.DpefBefTechInst[0].est_los_year_1 + dlPvtEduFacilities.education.Table_4.DpefBefTechInst[1].est_los_year_1 + dlPvtEduFacilities.education.Table_4.DpefBefTechInst[2].est_los_year_1">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefTechInst[3].est_los_year_2" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefTechInst[3].est_los_year_2=dlPvtEduFacilities.education.Table_4.DpefBefTechInst[0].est_los_year_2 + dlPvtEduFacilities.education.Table_4.DpefBefTechInst[1].est_los_year_2 + dlPvtEduFacilities.education.Table_4.DpefBefTechInst[2].est_los_year_2">
                            </td>
                            <td width="136" ng-bind="dlPvtEduFacilities.education.Table_4.DpefBefTechInst[3].tot_los" ng-value="dlPvtEduFacilities.education.Table_4.DpefBefTechInst[3].tot_los=dlPvtEduFacilities.education.Table_4.DpefBefTechInst[0].tot_los + dlPvtEduFacilities.education.Table_4.DpefBefTechInst[1].tot_los + dlPvtEduFacilities.education.Table_4.DpefBefTechInst[2].tot_los">
                            </td>
                        </tr>
                        <tr class="tdpa" height="21">
                            <td colspan="6" width="280" height="21">

                            </td>

                            <td width="136">
                                <button type="button" class="btn btn-block btn-success">save</button>
                            </td>
                        </tr>


                        <tr height="21">
                            <td class="tdpa" width="280" height="21">
                                GRAND TOTAL
                            </td>
                            <td width="136">
                                -
                            </td>
                            <td width="136">
                                -
                            </td>
                            <td width="136">
                                -
                            </td>
                            <td width="136">
                                -
                            </td>
                            <td width="136">
                                -
                            </td>
                            <td width="136">
                                -
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <br>
 <a href="#step3" id="s2" class="btn btn-sm btn-info pull-right" data-toggle="tab"><span
                        class="glyphicon glyphicon-arrow-right"></span> Fill Breakdown by Type of Educational Facility Informations</a>
                <br>
            </div>
            <div class="tab-pane fade" id="step3">

                <button style="float:right;" class="btn btn-info" ng-click="fetchSchoolData()">Load</button>
                <table class="table table-bordered">
                    <colgroup>
                        <col width="224"/>
                        <col width="63"/>
                        <col width="63"/>
                        <col width="231"/>
                        <col width="63"/>
                        <col width="72"/>
                        <col width="63"/>
                    </colgroup>
                    <tbody>

                    <tr class="trheadc" height="28">
                        <td rowspan="2" width="224" height="49">
                            Type of Schools and Assets
                        </td>
                        <td rowspan="2" width="63" height="49">
                            Estimated Replacement Cost (LKR)
                        </td>
                        <td rowspan="2" width="63" height="49">
                            Estimated Repair Cost (LKR)
                        </td>
                        <td rowspan="2" width="231" height="49">
                            Total Damages (LKR)
                        </td>
                        <td colspan="2" width="126" height="28">
                            Estimated Losses (LKR)
                        </td>
                        <td rowspan="2" width="63" height="49">
                            Total Losses (LKR)
                        </td>
                    </tr>
                    <tr class="trsubc" height="21">
                        <td width="63" height="21">
                            Year 1
                        </td>
                        <td width="72" height="21">
                            Year 2
                        </td>
                    </tr>
                    
                    <div ng-repeat="(key, value) in schoolData.other_govn_services.Table_4">

                        <span ng-bind="key"></span>

                        <div ng-repeat="(key, value) in value">
                            <span ng-bind="key"></span>
                            <div ng-repeat="model_data in value">

                                <div ng-repeat="data in model_data">
                                <span ng-bind="data.asset"></span>
                                <span ng-bind="data.est_rep_cost"></span>
                                <span ng-bind="data.est_repair_cost"></span>
                                <span ng-bind="data.tot_damages"></span>
                                <span ng-bind="data.est_los_year_1"></span>
                                <span ng-bind="data.est_los_year_2"></span>
                                <span ng-bind="data.tot_los"></span>

                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <table ng-repeat="(key, value) in schoolData.other_govn_services.Table_4">
                    <td ng-bind="key"></td>
                     <tr ng-repeat="(key, value) in value">
                     <td ng-bind="key"></td>
                     <tr ng-repeat="model_data in value">
                     <tr ng-repeat="data in model_data">
                     <td ng-bind="data.asset"></td>
                     </tr>
                     </tr>
                     </tr>
                     
                    </table>

                    <tr height="21">
                        <td class="tdpa" width="224" height="21">
                            GRAND TOTAL
                        </td>
                        <td width="63" height="21">
                            <br/>
                        </td>
                        <td width="63" height="21">
                            <br/>
                        </td>
                        <td width="231" height="21">
                            <br/>
                        </td>
                        <td width="63" height="21">
                            <br/>
                        </td>
                        <td width="72" height="21">
                            <br/>
                        </td>
                        <td width="63" height="21">
                            <br/>
                        </td>
                    </tr>

                    </tbody>
                </table>
                <div class="pull-right">
                    <br>
                    <button type="button" class="btn btn-info">Clear</button>
                    <button type="button" class="btn btn-success" ng-click="saveDlData(form_pvt_edu_facility_dl)">Submit</button>
                    <button type="button" ng-click="dlDataEdit(form_pvt_edu_facility_dl)" ng-if="!is_edit" class="btn btn-success">
                        Edit
                    </button>
                    <button type="button" ng-click="cancelEdit()" ng-if="is_edit" class="btn btn-warning">
                        Cancel Edit
                    </button>
                </div>
                <br><br><br>
            </div>
        </div>
    </div>


    </div>
    </div>

    <div class="col-md-12">


        <div class="modal fade" id="modal-container-218029" role="dialog" style="width:50%;margin:0 auto;"
             aria-hidden="true">
            <div class="modal-dialog" style="width:50%;">
                <div class="modal-content">
                    <div class="modal-header">

                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            
                        </button>
                        <h5 class="modal-title">
                            <span id="bookId"> </span>
                        </h5>
                    </div>
                    <div class="modal-body">
                        <!-- Text input-->
                        <div class="form-group">
                            <label class="col-md-2 control-label" for="textinput">Name</label>
                            <div class="col-md-10">
                                <input ng-model="new_school[schoolType].name" type="text" placeholder=""
                                       class="form-control input-md">

                            </div>
                        </div>
                    </div>
                    <br><br>
                    <div class="modal-footer">

                        <button type="button" class="btn btn-default" data-dismiss="modal">
                            Close
                        </button>
                        <button ng-click="addSchool()" type="button" class="btn btn-primary">
                            Save changes
                        </button>
                    </div>
                </div>

            </div>

        </div>


    </div>
    </div>

    </div>

    <!-- /.conainer-fluid -->
</main>
{% endblock content %}
